<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏µ‡πâ‡πÄ‡∏Å‡∏° (VIP)</title>

    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #121212;
            color: white;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 450px;
            background: #1e1e24;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            border-top: 5px solid #00d2d3; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ô‡∏µ‡∏≠‡∏≠‡∏ô */
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Report */
        .btn-history {
            display: inline-block;
            background: #2d3436;
            color: #dfe6e9;
            padding: 8px 15px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 20px;
            transition: 0.3s;
            border: 1px solid #444;
        }
        .btn-history:hover { background: #00d2d3; color: #000; border-color: #00d2d3; }

        h2 { margin: 10px 0 5px; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.1); }
        .subtitle { color: #aaa; font-size: 0.9rem; margin-bottom: 25px; }

        /* Grid ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô */
        .friend-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* ‡πÅ‡∏ñ‡∏ß‡∏•‡∏∞ 5 ‡∏Ñ‡∏ô */
            gap: 10px;
            margin-bottom: 25px;
        }

        .friend-item { cursor: pointer; position: relative; }
        .friend-item img {
            width: 55px; height: 55px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #333;
            transition: 0.3s;
            filter: grayscale(80%);
        }
        .friend-item span { display: block; font-size: 0.75rem; margin-top: 5px; color: #888; }

        /* Effect ‡∏ï‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô */
        input[type="radio"]:checked + .friend-item img {
            border-color: #00d2d3;
            box-shadow: 0 0 15px #00d2d3;
            transform: scale(1.1);
            filter: grayscale(0%);
        }
        input[type="radio"]:checked + .friend-item span { color: #00d2d3; font-weight: bold; }

        /* ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß */
        .already-done { opacity: 0.3; pointer-events: none; }
        .already-done img { filter: grayscale(100%) brightness(0.5); border-color: red !important; }

        /* Input & Select ‡∏™‡∏ß‡∏¢‡πÜ */
        .form-group { margin-bottom: 15px; text-align: left; }
        label { font-size: 0.9rem; color: #aaa; margin-left: 5px; }
        
        select, input[type="password"] {
            width: 100%;
            padding: 12px 15px;
            margin-top: 5px;
            border-radius: 12px;
            border: 1px solid #333;
            background: #2a2a35;
            color: white;
            font-size: 1rem;
            font-family: 'Kanit';
            outline: none;
            box-sizing: border-box;
            transition: 0.3s;
        }
        select:focus, input:focus { border-color: #00d2d3; box-shadow: 0 0 8px rgba(0, 210, 211, 0.2); }

        /* ‡∏õ‡∏∏‡πà‡∏° Submit */
        .btn-submit {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(45deg, #00d2d3, #0984e3);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(0, 210, 211, 0.3);
        }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 210, 211, 0.4); }
        .btn-submit:disabled { background: #555; cursor: not-allowed; box-shadow: none; }

        input[type="radio"] { display: none; }
    </style>
</head>
<body>

<div class="container">
    <a href="report.html" class="btn-history"><i class="fas fa-history"></i> ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</a>

    <h2>üöÄ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡∏ö‡πâ‡∏≤‡∏á?</h2>
    <div id="statusText" class="subtitle">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠... ‚è≥</div>

    <div class="friend-grid">
        <label>
            <input type="radio" name="friend" value="‡∏û‡∏µ‡πà‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå">
            <div class="friend-item" id="card-‡∏û‡∏µ‡πà‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå"><img src="beer.jpg"><span>‡∏û‡∏µ‡πà‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå</span></div>
        </label>
        <label>
            <input type="radio" name="friend" value="‡∏ü‡∏≠‡∏£‡πå‡∏ó">
            <div class="friend-item" id="card-‡∏ü‡∏≠‡∏£‡πå‡∏ó"><img src="fort.jpg"><span>‡∏ü‡∏≠‡∏£‡πå‡∏ó</span></div>
        </label>
        <label>
            <input type="radio" name="friend" value="‡πÄ‡∏à">
            <div class="friend-item" id="card-‡πÄ‡∏à"><img src="jay.jpg"><span>‡πÄ‡∏à</span></div>
        </label>
        <label>
            <input type="radio" name="friend" value="‡∏ô‡∏≤‡∏¢">
            <div class="friend-item" id="card-‡∏ô‡∏≤‡∏¢"><img src="nine.jpg"><span>‡∏ô‡∏≤‡∏¢</span></div>
        </label>
        <label>
            <input type="radio" name="friend" value="‡πÇ‡∏¢">
            <div class="friend-item" id="card-‡πÇ‡∏¢"><img src="yo.jpg"><span>‡πÇ‡∏¢</span></div>
        </label>
    </div>

    <div class="form-group">
        <label><i class="fas fa-gamepad"></i> ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏≠‡∏∞‡πÑ‡∏£:</label>
        <select id="gameSelect">
            <option value="Valorant">üî´ Valorant</option>
            <option value="PUBG">üç≥ PUBG</option>
            <option value="Green Hell">üåø Green Hell</option>
            <option value="Other">üé≤ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ / ‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏•‡πà‡∏ô</option>
        </select>
    </div>

    <div class="form-group">
        <label><i class="fas fa-toggle-on"></i> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
        <select id="statusSelect" style="color: #00d2d3; font-weight: bold;">
            <option value="‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô">‚úÖ ‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ä‡∏±‡∏ß‡∏£‡πå</option>
            <option value="‡∏ö‡∏¥‡∏î">üå™Ô∏è ‡∏ö‡∏¥‡∏î / ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á</option>
        </select>
    </div>

    <div class="form-group">
        <input type="password" id="adminPass" placeholder="üîí ‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö (Admin Pin)" maxlength="10" style="text-align: center; letter-spacing: 3px;">
    </div>

    <button onclick="sendData()" id="btnSubmit" class="btn-submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üíæ</button>
</div>

<script>
    // ==========================================
    // ‚ö†Ô∏è‚ö†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç URL ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚ö†Ô∏è‚ö†Ô∏è
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxk7wWNAFnoC9eJ6ZrN22Xi7zoB-hoqPomVgJvkQaGGR5k9oGlBqq-DNQqxBq209FE14g/exec";
    const SECRET_PIN = "6767"; 
    // ==========================================

    let todayRecordedNames = [];

    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏•‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡πâ‡∏≤‡∏á ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
    window.onload = function() {
        fetch(SCRIPT_URL)
        .then(res => res.json())
        .then(data => {
            const d = new Date();
            const todayStr = d.getDate() + "/" + (d.getMonth()+1) + "/" + d.getFullYear();

            data.forEach(item => {
                if(item.date === todayStr) {
                    todayRecordedNames.push(item.name);
                    const card = document.getElementById('card-' + item.name);
                    if(card) {
                        card.classList.add('already-done');
                        card.innerHTML += '<i class="fas fa-check-circle" style="position:absolute; top:0; right:0; color:#2ecc71; background:white; border-radius:50%;"></i>';
                    }
                }
            });
            document.getElementById('statusText').innerText = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üëá";
            document.getElementById('statusText').style.color = "#aaa";
        })
        .catch(err => {
            console.log(err);
            document.getElementById('statusText').innerText = "‚ö†Ô∏è ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏ô‡πá‡∏ï)";
        });
    }

    function sendData() {
        const btn = document.getElementById('btnSubmit');
        const friend = document.querySelector('input[name="friend"]:checked');
        const passInput = document.getElementById('adminPass').value;
        const gameValue = document.getElementById('gameSelect').value;
        const statusValue = document.getElementById('statusSelect').value;

        // Validation
        if (!friend) return alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô!");
        if (todayRecordedNames.includes(friend.value)) return alert("‚ö†Ô∏è ‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß!");
        if (passInput !== SECRET_PIN) {
            alert("‚õî ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î! ‡πÑ‡∏õ‡∏ñ‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà");
            return;
        }

        // Animation ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î
        btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•... üöÄ"; 
        btn.disabled = true;
        btn.style.background = "#555";
        
        fetch(SCRIPT_URL, {
            method: 'POST', 
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                name: friend.value, 
                status: statusValue,
                game: gameValue 
            })
        }).then(() => {
            alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (" + gameValue + ")"); 
            location.reload();
        }).catch(err => {
            alert("Error: " + err);
            btn.disabled = false;
            btn.innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üíæ";
            btn.style.background = "linear-gradient(45deg, #00d2d3, #0984e3)";
        });
    }
</script>

</body>
</html>
